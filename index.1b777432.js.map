{"mappings":"AAcA,MAAMA,EAAaC,SAASC,cAAc,gBACpCC,EAAYF,SAASC,cAAc,UACnCE,EAAWH,SAASC,cAAc,cAClCG,EAAaJ,SAASC,cAAc,YAwB1CI,eAAeC,EAAWC,GACxB,MAAMC,EAAQD,EAAIE,KAAIJ,MAAMK,IAC1B,MAAMC,EAAc,IAAIC,gBAAgB,CACtCC,IA3CU,qCA4CVC,EAAGJ,EACHK,WAAY,QACZC,YAAa,aACbC,WAAY,OACZC,KA/CK,EAgDLC,SAAU,KAGNC,QAAaC,MAAM,4BAAeV,KAAeD,KACvD,IAAKU,EAAKE,GACR,MAAM,IAAIC,MAEZ,aAAaH,EAAKI,MAAM,IAQ1B,aALmBC,QAAQC,WAAWlB,IAEnCmB,QAAO,EAACC,OAAEA,KAAwB,cAAXA,IACvBnB,KAAI,EAACoB,MAAEA,KAAYA,EAAM,I,CA5C9B9B,EAAW+B,iBAAiB,UAI5B,SAAuBC,GACrBA,EAAMC,iBAEN,MAAMC,EAAO,IAAIC,SAASH,EAAMI,eAKhC7B,EAJY2B,EACTG,OAAO,UACPT,QAAOU,GAAQA,IACf5B,KAAI4B,GAAQA,EAAKC,UAEjBC,MAAKlC,MAAMe,IACV,MAAMoB,EAAUpB,EAAKX,KAAI,EAACgC,OAAEA,KAAaA,EAAO,WACnBnC,EAAWkC,GACxCpC,EAAWsC,eAAYC,CAA4B,IAEpDC,OAAMC,GAAKC,QAAQC,IAAIF,KACvBG,SAAQ,IAAMjD,EAAWkD,S,IAlB9B/C,EAAU4B,iBAAiB,SAoF3B,WAAyB,IAnFzB3B,EAAS2B,iBAAiB,SAoF1B,WAA2B","sources":["src/index.js"],"sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '41079066-0341c17d8bd684537c8a66e3e';\nlet page = 1;\n\n// const queryParams = new URLSearchParams({\n//   key: API_KEY,\n//   q: '',\n//   image_type: 'photo',\n//   orientation: 'horizontal',\n//   safesearch: 'true',\n//   page: page,\n//   per_page: 40,\n// });\n\nconst searchForm = document.querySelector('.search-form');\nconst btnSubmit = document.querySelector('button');\nconst loadMore = document.querySelector('.load-more');\nconst divGallery = document.querySelector('.gallery');\n\nsearchForm.addEventListener('submit', handlerSearch);\nbtnSubmit.addEventListener('click', handlerSubmit);\nloadMore.addEventListener('click', handlerLoadMore);\n\nfunction handlerSearch(event) {\n  event.preventDefault();\n\n  const data = new FormData(event.currentTarget);\n  const arr = data\n    .getAll('animal')\n    .filter(item => item)\n    .map(item => item.trim());\n  getAnimals(arr)\n    .then(async resp => {\n      const animals = resp.map(({ origin }) => origin[0]);\n      const animalsService = await getAnimals(animals);\n      divGallery.innerHTML = createMarkup(animalsService);\n    })\n    .catch(e => console.log(e))\n    .finally(() => searchForm.reset());\n}\n\nasync function getAnimals(arr) {\n  const resps = arr.map(async animal => {\n    const queryParams = new URLSearchParams({\n      key: API_KEY,\n      q: animal,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: page,\n      per_page: 40,\n    });\n\n    const resp = await fetch(`${BASE_URL}?${queryParams}&${animal}`);\n    if (!resp.ok) {\n      throw new Error();\n    }\n    return await resp.json();\n  });\n\n  const data = await Promise.allSettled(resps);\n  const animalObj = data\n    .filter(({ status }) => status === 'fulfilled')\n    .map(({ value }) => value[0]);\n\n  return animalObj;\n}\n\n// async function getAnimals(arr) {\n//   const resps = arr.map(async item => {\n//     const resp = await fetch(`${BASE_URL}?${queryParams}&${item}`);\n//     if (!resp.ok) {\n//       throw new Error();\n//     }\n//     return await resp.json();\n//   });\n//   const data = await Promise.allSettled(resps);\n//   const animalObj = data\n//     .filter(({ status }) => status === 'fulfilled')\n//     .map(({ value }) => value[0]);\n\n//   return animalObj;\n// }\n\nfunction createMarkup() {\n  `<div class=\"photo-card\">\n    <img src=\"\" alt=\"\" loading=\"lazy\" />\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b>Likes</b>\n      </p>\n      <p class=\"info-item\">\n        <b>Views</b>\n      </p>\n      <p class=\"info-item\">\n        <b>Comments</b>\n      </p>\n      <p class=\"info-item\">\n        <b>Downloads</b>\n      </p>\n    </div>\n  </div>;`;\n}\n\nfunction handlerSubmit() {}\nfunction handlerLoadMore() {}\n"],"names":["$1f0dc3b9307be026$var$searchForm","document","querySelector","$1f0dc3b9307be026$var$btnSubmit","$1f0dc3b9307be026$var$loadMore","$1f0dc3b9307be026$var$divGallery","async","$1f0dc3b9307be026$var$getAnimals","arr","resps","map","animal","queryParams","URLSearchParams","key","q","image_type","orientation","safesearch","page","per_page","resp","fetch","ok","Error","json","Promise","allSettled","filter","status","value","addEventListener","event","preventDefault","data","FormData","currentTarget","getAll","item","trim","then","animals","origin","innerHTML","$1f0dc3b9307be026$var$createMarkup","catch","e","console","log","finally","reset"],"version":3,"file":"index.1b777432.js.map"}